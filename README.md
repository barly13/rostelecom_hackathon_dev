# Проект Ростелекома: Прогнозирование оттока клиентов

### Участники:
- Ячменьков Алексей
- Аллабердин Богдан
- Баранов Владислав
- Шарипов Тимур
- Ивандаев Роман
- Райан Гослинг

## Описание проекта
Проект направлен на анализ поведения клиентов и прогнозирование их оттока на основе данных о заказах. Включает этапы подготовки данных, аналитики и построения прогнозной модели и анализ розничных продаж.

---

## Подготовка данных
Проведен анализ и очистка данных для обеспечения качественного моделирования:
- Удалены "висящие" записи (отсутствующие внешние ключи).
- Устранены дубликаты и выбросы.
- Найдены аномалии в данных:
  - Один ZIP-код соответствует разным городам и штатам.
  - Наличие заказов со статусом `delivered`, но без полной оплаты.
  - Ошибочное указание email, целочисленных значений и т.д. вместо города для некоторых продавцов.

---

## Анализ данных
Проведены следующие анализы с визуализацией результатов:

### 1. Территориальный анализ
- **Вывод**: Вероятность оттока клиентов практически не зависит от штата, в котором совершена покупка.

### 2. RFM-анализ (Recency, Frequency, Monetary)
- **Вывод**: Классы распределены неравномерно, некоторые отсутствуют.

### 3. ABC/XYZ-анализ
- **Вывод**: В данных присутствуют только товары категории `Z` (низкая предсказуемость спроса).

### 4. Когортный анализ
- **Вывод**: Клиенты чаще всего совершают повторные покупки в течение нескольких месяцев после первого заказа.

---

## Построение модели прогнозирования

### Стратегия анализа
Клиенты разделены на две группы:
1. **С одним заказом** (90+ тыс. клиентов).
2. **С несколькими заказами**.

Для каждой группы применялись разные подходы к моделированию.

### Методология
1. **Гипотеза**: Группы пользователей похожи между собой с точки зрения временных промежутков между заказами.
2. **Разметка данных**:
   - Если вероятность совершения нового заказа (на текущую дату) < 10%, клиент помечается как "ушедший".
   - В противном случае — "оставшийся".
3. **Моделирование**:
   - Для клиентов с **одним заказом**:
     - Использована **логистическая регрессия**.
     - Признаки: стоимость заказа, оценка заказа, время с момента последнего заказа.
     - **Результат**: Неправильно построенный классификатор (время с последнего заказа — доминирующий фактор).
   - Для клиентов с **несколькими заказами**:
     - Построен **случайный лес** на основе данных о последнем заказе и усредненных метриках по истории.
     - На предсказаниях леса обучена **логистическая регрессия** с учетом времени с последнего заказа.
     - **Результат**: Неправильно построенный классификатор (время с последнего заказа — доминирующий фактор).

### Проблемы и ограничения
- Основная сложность — **преобладание клиентов с одним заказом** (>90% данных), что снижает качество прогноза.
- Модели слабо учитывают поведенческие паттерны из-за ограниченности данных.

---

## Дальнейшие шаги
1. **Сбор дополнительных данных**: история покупок, разделение на категории товаров, сбор дополнительных аналитических метрик.
2. **Альтернативные методы разметки**: кластеризация клиентов, обучение классификатора на основе RFM-анализа и когортного анализа, а также на основании "похожести" клиентов.
3. **Тестирование других моделей**.

---